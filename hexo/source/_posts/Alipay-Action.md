---
title: Alipay Action
date: 2019-08-24 23:40:28
tags: [PAY]
categories: [JAVA]
---

阿里支付宝实践<!--more-->

### 配置支付宝开发者环境

* 配置

  没有正式的配置，那么就用沙箱环境实现下

* 下载natapp

  ``natapp.cn``

* 配置nginx方便异步回调测试  servername 子域名 80 proxy_pass 代理到本地natapp的域名

* 支付宝绑定域名即应用网关 分配一个子域名，并在本地指向到服务器ip上。

* 配置子域名并配置nginx

* 开始玩吧

* 订单状态与支付状态不同步的解决

  ```
  1.支付成功后再下订单
  2,下订单同步到我们服务器上
  3.订单生成时,一旦生成支付宝订单就同步到我们服务器里,就时给我们的后台下一个订单,当然这时支付宝里已经有一份同样的订单了,
      支付宝会发个状态,支付中,支付成功,支付失败,
      我们把这个状态再同步到我们服务器,这样双重判断可以解决
  
  ```

* 异步通知的频率

  `通知的间隔频率一般是：4m,10m,10m,1h,2h,6h,15h`